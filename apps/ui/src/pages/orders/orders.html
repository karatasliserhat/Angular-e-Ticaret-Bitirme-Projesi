<title>TechStory | Siparişlerim</title>
<section class="orders-section">
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-content">
        <h1><i class="fas fa-box"></i> Siparişlerim</h1>
        <p>Tüm siparişlerinizi buradan takip edebilirsiniz</p>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <span class="stat-number">{{totalCount()}}</span>
          <span class="stat-label">Toplam Sipariş</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">2</span>
          <span class="stat-label">{{pendingCount()}}</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">10</span>
          <span class="stat-label">{{completedCount()}}</span>
        </div>
      </div>
    </div>

    <!-- Filter and Search -->
    <div class="orders-controls">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Sipariş no, ürün adı ara..." />
      </div>
      <div class="filter-controls">
        <select class="filter-select" id="statusFilter">
          <option value="">Tüm Durumlar</option>
          <option value="pending">Hazırlanıyor</option>
          <option value="shipped">Kargoda</option>
          <option value="delivered">Teslim Edildi</option>
          <option value="cancelled">İptal Edildi</option>
        </select>
        <select class="filter-select" id="timeFilter">
          <option value="">Tüm Zamanlar</option>
          <option value="week">Son 1 Hafta</option>
          <option value="month">Son 1 Ay</option>
          <option value="3months">Son 3 Ay</option>
          <option value="year">Son 1 Yıl</option>
        </select>
        <button class="filter-btn">
          <i class="fas fa-filter"></i>
          Filtrele
        </button>
      </div>
    </div>

    <!-- Orders List -->
    
    <div class="orders-list">
        @for(val of orders(); track val.id){
      <!-- Order 1 - Aktif -->
      <div class="order-card" data-status="pending">
        <div class="order-header">
          <div class="order-info">
            <h3>Sipariş #{{val.orderNumber}}</h3>
            <span class="order-date"
              >{{val.date | date:'dd MMM yyyy HH:ii'}}</span
            >
          </div>
          @if(val.status==="Hazırlanıyor"){
          <div class="order-status">
            <span class="status-badge pending">
              <i class="fas fa-clock"></i>
              {{val.status}}
            </span>
          </div>
          }@else if (val.status==="Kargoda") {
          <span class="status-badge shipped">
            <i class="fas fa-truck"></i>
            {{val.status}}
          </span>
          }@else if(val.status==="Tamamlandı"){
          <span class="status-badge delivered">
            <i class="fas fa-check-circle"></i>
            {{val.status}}
          </span>
          }
        </div>
        @for(d of val.baskets; track d.id){
        <div class="order-items">
          <div class="order-item">
            <img [src]="d.imageUrl" [alt]="d.productName" />
            <div class="item-details">
              <h4>{{d.productName}}</h4>
              <p>{{d.categoryName}}</p>
              <span class="quantity">Adet: {{d.quantity}}</span>
            </div>
            <span class="item-price"
              >{{(d.price * d.quantity) | trCurrency:'₺':false}}</span
            >
          </div>
        </div>
        }

        <div class="order-footer">
          <div class="order-total">
            <span
              >Toplam:
              <strong>{{ totalPrice() | trCurrency:'₺':false}}</strong></span
            >
          </div>
          <div class="order-actions">
            <!-- <button class="btn-secondary">
              <i class="fas fa-eye"></i>
              Detaylar
            </button> -->
            @if(val.status==="Kargoda"){
            <button class="btn-primary">
              <i class="fas fa-truck"></i>
              Kargo Takip
            </button>
            }
          </div>
        </div>
      </div>

      <!-- Load More Button -->
    }  
   
    
    @if(limit()<totalCount()){
      <div class="load-more" >
        <button (click)="showMore()" class="load-more-btn">
          <i class="fas fa-plus"></i>
          Daha Fazla Sipariş Yükle
        </button>
      </div>
      }
       </div>
  </div>
</section>
